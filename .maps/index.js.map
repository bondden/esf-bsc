{"version":3,"sources":["index.es7.js"],"names":[],"mappings":"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","file":"index.es7.js","sourcesContent":["/**\n * Created by Denis Bondarenko <bond.den@gmail.com> on 01.08.2015.\n */\n\"use strict\";\n\nvar\n  fs       =require('fs-extra'),\n  path     =require('path'),\n  parentSrc=require('parent-search')\n;\n\nimport * as modUtl from 'esf-utl';\n\nvar\n  U=modUtl.Utl,\n  L=U.log,\n  E=U.rejectingError\n;\n\n/**\n * abstract class\n */\nexport class Bsc{\n\n\tconstructor(){\n\t\tthis.cfg=null;\n\t\tthis.cfgPth='tst/d/esfapp.cfg.json';\n\t}\n\n\t/**\n\t * [[Description]]\n\t * @returns {Promise} [[Description]]\n\t */\n\tloadConfig(){\n\n\t\tvar H=this;\n\t\tif(H.cfg){\n\t\t\treturn new Promise((rs,rj)=>{\n        L('Bsc: Using preset cfg: '+JSON.stringify(H.cfg,null,'\\t'));\n\t\t\t\trs(H.cfg);\n\t\t\t});\n\t\t}\n\n\t\treturn new Promise((rs,rj)=>{\n\n      L('Searching .esfrc starting from : `'+__dirname+'`...');\n\n      parentSrc(__dirname,'.esfrc',{},(e0,d0)=>{\n\n        if(e0){\n          return E(3,'.esfrc search error',e0,rj);\n        }\n\n        if(!d0){\n          let msg='.esfrc not found';\n          return E(3,msg,new Error(msg),rj);\n        }\n\n        L('.esfrc found at : '+d0);\n\n        let esfrcPath=path.resolve(d0);\n        L('Getting cfgPth from : `'+esfrcPath+'`...');\n        fs.readJson(esfrcPath,(e,r)=>{\n\n          if(e){\n            return E(1,'.esfrc reading error',e,rj);\n          }\n\n          if(typeof r.cfgPth === 'string'){\n            H.cfgPth = r.cfgPth;\n          }\n\n          if(!path.isAbsolute(H.cfgPth)){\n            H.cfgPth=__dirname+'/'+H.cfgPth;\n          }\n\n          L('Using cfgPath: '+H.cfgPth);\n\n          fs.readJson(path.resolve(H.cfgPth),(e1,cfg)=>{\n\n            if(e1){\n              return E(2,'Error reading '+H.cfgPth,e1,rj);\n            }\n\n            H.cfg=cfg;\n            rs(H.cfg);\n\n          });\n\n        });\n\n      });\n\n\t\t});\n\n\t}\n\n\treloadConfig(pathToConfigFile=null){\n\t\tvar H=this;\n\t\treturn new Promise((rs,rj)=>{\n\n\t\t\tif(pathToConfigFile){\n\t\t\t\tH.cfgPth=pathToConfigFile;\n\t\t\t}\n\n\t\t\tH.loadConfig().then((r)=>{\n\t\t\t\trs(r);\n\t\t\t}).catch((e)=>{\n        return E(3,'Error reloading config from: '+H.cfgPth,e,rj);\n\t\t\t});\n\n\t\t});\n\t}\n\n}\n"],"sourceRoot":"/source/"}