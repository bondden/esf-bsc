{"version":3,"sources":["index.es7.js"],"names":[],"mappings":"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","file":"index.es7.js","sourcesContent":["/**\n * Created by Denis Bondarenko <bond.den@gmail.com> on 01.08.2015.\n */\n\"use strict\";\n\nvar\n  fs       =require('fs-extra'),\n  path     =require('path'),\n  parentSrc=require('parent-search')\n;\n\nimport * as modUtl from '@bond007/esf-utl';\n\nvar\n  U=modUtl.Utl,\n  L=U.log,\n  E=U.rejectingError\n;\n\n/**\n * abstract class\n */\nexport class Bsc{\n\n\tconstructor(){\n\t\tthis.cfg=null;\n\t\tthis.cfgPth='tst/d/esfapp.cfg.json';\n\t}\n\n\t/**\n\t * [[Description]]\n\t * @returns {Promise} [[Description]]\n\t */\n\tloadConfig(){\n\n\t\tvar H=this;\n\t\tif(H.cfg){\n\t\t\treturn new Promise((rs,rj)=>{\n        L('Bsc: Using preset cfg: '+JSON.stringify(H.cfg,null,'\\t'));\n\t\t\t\trs(H.cfg);\n\t\t\t});\n\t\t}\n\n\t\treturn new Promise((rs,rj)=>{\n\n      L('Searching .esfrc starting from : `'+__dirname+'`...');\n\n      parentSrc(__dirname,'.esfrc',{},(e0,d0)=>{\n\n        if(e0){\n          return E(3,'.esfrc search error',e0,rj);\n        }\n\n        if(!d0){\n          let msg='.esfrc not found';\n          return E(3,msg,new Error(msg),rj);\n        }\n\n        L('.esfrc found at : '+d0);\n\n        let esfrcPath=path.resolve(d0);\n        L('Getting cfgPth from : `'+esfrcPath+'`...');\n        fs.readJson(esfrcPath,(e,r)=>{\n\n          if(e){\n            return E(1,'.esfrc reading error',e,rj);\n          }\n\n          if(typeof r.cfgPth === 'string'){\n            H.cfgPth = r.cfgPth;\n          }\n\n          if(!path.isAbsolute(H.cfgPth)){\n            H.cfgPth=__dirname+'/'+H.cfgPth;\n          }\n\n          L('Using cfgPath: '+H.cfgPth);\n\n          fs.readJson(path.resolve(H.cfgPth),(e1,cfg)=>{\n\n            if(e1){\n              return E(2,'Error reading '+H.cfgPth,e1,rj);\n            }\n\n            H.cfg=cfg;\n            rs(H.cfg);\n\n          });\n\n        });\n\n      });\n\n\t\t});\n\n\t}\n\n\treloadConfig(pathToConfigFile=null){\n\t\tvar H=this;\n\t\treturn new Promise((rs,rj)=>{\n\n\t\t\tif(pathToConfigFile){\n\t\t\t\tH.cfgPth=pathToConfigFile;\n\t\t\t}\n\n\t\t\tH.loadConfig().then((r)=>{\n\t\t\t\trs(r);\n\t\t\t}).catch((e)=>{\n        return E(3,'Error reloading config from: '+H.cfgPth,e,rj);\n\t\t\t});\n\n\t\t});\n\t}\n\n}\n"],"sourceRoot":"/source/"}